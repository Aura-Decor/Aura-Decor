<svg aria-roledescription="sequence" role="graphics-document document" viewBox="-50 -10 2020.5 994" height="994" xmlns="http://www.w3.org/2000/svg" width="2020.5" id="container">

<style>
#container{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}
#container .edge-thickness-normal{stroke-width:1px;}
#container .edge-thickness-thick{stroke-width:3.5px;}
#container .edge-pattern-solid{stroke-dasharray:0;}
#container .marker{fill:#333333;stroke:#333333;}
#container .marker.cross{stroke:#333333;}
#container svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}
#container p{margin:0;}
#container .actor{stroke:#aaaa33;fill:#ffffde;}
#container text.actor>tspan{fill:black;stroke:none;}
#container .actor-line{stroke:#aaaa33;}
#container .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}
#container .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}
#container #arrowhead path{fill:#333;stroke:#333;}
#container .sequenceNumber{fill:white;}
#container #sequencenumber{fill:#333;}
#container #crosshead path{fill:#333;stroke:#333;}
#container .messageText{fill:#333;stroke:none;}
#container .labelBox{stroke:#aaaa33;fill:#ffffde;}
#container .labelText,#container .labelText>tspan{fill:black;stroke:none;}
#container .loopText,#container .loopText>tspan{fill:black;stroke:none;}
#container .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:#aaaa33;fill:#ffffde;}
#container .note{stroke:#aaaa33;fill:#ffffde;}
#container .noteText,#container .noteText>tspan{fill:black;stroke:none;}
#container .activation0{fill:#ffffde;stroke:#aaaa33;}
#container .activation1{fill:#ffffde;stroke:#aaaa33;}
#container .activation2{fill:#ffffde;stroke:#aaaa33;}
#container .actorPopupMenu{position:absolute;}
#container .actorPopupMenuPanel{position:absolute;fill:#ffffde;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);}
#container .actor-man line{stroke:#aaaa33;fill:#ffffde;}
#container .actor-man circle,#container line{stroke:#aaaa33;fill:#ffffde;stroke-width:2px;}
#container :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}
</style>

<!-- Actor boxes at top -->
<g><rect class="actor actor-top" ry="3" rx="3" name="Client" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="0"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="75"><tspan dy="0" x="75">Client</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="ExceptionMiddleware" height="65" width="175" stroke="#aaaa33" fill="#ffffde" y="0" x="200"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="287.5"><tspan dy="0" x="287.5">ExceptionMiddleware</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="RateLimitingMiddleware" height="65" width="195" stroke="#aaaa33" fill="#ffffde" y="0" x="425"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="522.5"><tspan dy="0" x="522.5">RateLimitingMiddleware</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="AuthenticationMiddleware" height="65" width="211" stroke="#aaaa33" fill="#ffffde" y="0" x="670"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="775.5"><tspan dy="0" x="775.5">AuthenticationMiddleware</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="Controller" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="947.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1022.5"><tspan dy="0" x="1022.5">Controller</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="Service" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="1170.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1245.5"><tspan dy="0" x="1245.5">Service</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="Repository" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="1370.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1445.5"><tspan dy="0" x="1445.5">Repository</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="Database" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="1570.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1645.5"><tspan dy="0" x="1645.5">Database</tspan></text></g>

<g><rect class="actor actor-top" ry="3" rx="3" name="Cache" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="0" x="1770.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="32.5" x="1845.5"><tspan dy="0" x="1845.5">Cache</tspan></text></g>

<!-- Actor lifelines -->
<g><line name="Client" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="75" y1="65" x1="75" id="actor0"></line></g>
<g><line name="ExceptionMiddleware" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="287.5" y1="65" x1="287.5" id="actor1"></line></g>
<g><line name="RateLimitingMiddleware" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="522.5" y1="65" x1="522.5" id="actor2"></line></g>
<g><line name="AuthenticationMiddleware" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="775.5" y1="65" x1="775.5" id="actor3"></line></g>
<g><line name="Controller" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="1022.5" y1="65" x1="1022.5" id="actor4"></line></g>
<g><line name="Service" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="1245.5" y1="65" x1="1245.5" id="actor5"></line></g>
<g><line name="Repository" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="1445.5" y1="65" x1="1445.5" id="actor6"></line></g>
<g><line name="Database" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="1645.5" y1="65" x1="1645.5" id="actor7"></line></g>
<g><line name="Cache" stroke="#aaaa33" stroke-width="0.5px" class="actor-line" y2="908" x2="1845.5" y1="65" x1="1845.5" id="actor8"></line></g>

<!-- Cache Hit Loop -->
<g>
<line class="loopLine" y2="459" x2="1856.5" y1="459" x1="1234.5"></line>
<line class="loopLine" y2="792" x2="1856.5" y1="459" x1="1856.5"></line>
<line class="loopLine" y2="792" x2="1856.5" y1="792" x1="1234.5"></line>
<line class="loopLine" y2="792" x2="1234.5" y1="459" x1="1234.5"></line>
<polygon class="labelBox" points="1234.5,459 1284.5,459 1284.5,472 1276.1,479 1234.5,479"></polygon>
<text style="font-size: 16px; font-weight: 400;" class="labelText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="472" x="1260">loop</text>
<text style="font-size: 16px; font-weight: 400;" class="loopText" text-anchor="middle" y="477" x="1570.5"><tspan x="1570.5">[[Cache Hit]]</tspan></text>
</g>

<!-- Messages -->
<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="80" x="180">"HTTP Request"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="113" x2="283.5" y1="113" x1="76"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="128" x="404">"Process Request"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="161" x2="518.5" y1="161" x1="288.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="176" x="1183">"Check Rate Limits"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="209" x2="1841.5" y1="209" x1="523.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="224" x="1186">"Rate Limit Status"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="257" x2="526.5" y1="257" x1="1844.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="272" x="648">"Continue Pipeline"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="305" x2="771.5" y1="305" x1="523.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="320" x="898">"Authenticated Request"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="353" x2="1018.5" y1="353" x1="776.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="368" x="1133">"Business Operation"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="401" x2="1241.5" y1="401" x1="1023.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="416" x="1544">"Check Cache"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="449" x2="1841.5" y1="449" x1="1246.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="509" x="1547">"Cached Data"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="542" x2="1249.5" y1="542" x1="1844.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="557" x="1344">"Data Operation"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="590" x2="1441.5" y1="590" x1="1246.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="605" x="1544">"SQL Query"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="638" x2="1641.5" y1="638" x1="1446.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="653" x="1547">"Result Set"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="686" x2="1449.5" y1="686" x1="1644.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="701" x="1347">"Domain Objects"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="734" x2="1249.5" y1="734" x1="1444.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="749" x="1544">"Update Cache"</text>
<line style="fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine0" y2="782" x2="1841.5" y1="782" x1="1246.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="807" x="1136">"Business Result"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="840" x2="1026.5" y1="840" x1="1244.5"></line>

<text style="font-size: 16px; font-weight: 400;" dy="1em" class="messageText" alignment-baseline="middle" dominant-baseline="middle" text-anchor="middle" y="855" x="550">"JSON Response"</text>
<line style="stroke-dasharray: 3, 3; fill: none;" marker-end="url(#arrowhead)" stroke="#333" stroke-width="2" class="messageLine1" y2="888" x2="79" y1="888" x1="1021.5"></line>

<!-- Actor boxes at bottom -->
<g><rect class="actor actor-bottom" ry="3" rx="3" name="Client" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="0"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="75"><tspan dy="0" x="75">Client</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="ExceptionMiddleware" height="65" width="175" stroke="#aaaa33" fill="#ffffde" y="908" x="200"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="287.5"><tspan dy="0" x="287.5">ExceptionMiddleware</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="RateLimitingMiddleware" height="65" width="195" stroke="#aaaa33" fill="#ffffde" y="908" x="425"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="522.5"><tspan dy="0" x="522.5">RateLimitingMiddleware</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="AuthenticationMiddleware" height="65" width="211" stroke="#aaaa33" fill="#ffffde" y="908" x="670"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="775.5"><tspan dy="0" x="775.5">AuthenticationMiddleware</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="Controller" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="947.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="1022.5"><tspan dy="0" x="1022.5">Controller</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="Service" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="1170.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="1245.5"><tspan dy="0" x="1245.5">Service</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="Repository" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="1370.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="1445.5"><tspan dy="0" x="1445.5">Repository</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="Database" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="1570.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="1645.5"><tspan dy="0" x="1645.5">Database</tspan></text></g>

<g><rect class="actor actor-bottom" ry="3" rx="3" name="Cache" height="65" width="150" stroke="#aaaa33" fill="#ffffde" y="908" x="1770.5"></rect>
<text style="text-anchor: middle; font-size: 16px; font-weight: 400;" class="actor actor-box" alignment-baseline="central" dominant-baseline="central" y="940.5" x="1845.5"><tspan dy="0" x="1845.5">Cache</tspan></text></g>

<!-- Arrow definitions -->
<defs>
<marker orient="auto-start-reverse" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="7.9" id="arrowhead">
<path d="M -1 0 L 10 5 L 0 10 z"></path>
</marker>
</defs>

</svg>
